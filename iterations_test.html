<html ng-app='iterationTest'>

<head>
    <title>
        Iteration Test
    </title>
    <script src="angular.js"></script>
    <style type="text/css">
    .menu-disabled-true {
        color: gray;
    }
    </style>
</head>

<body>
    <div ng-controller='DeathrayMenuController'>
        <button ng-click='toggleMenu()'>Toggle Menu</button>
        <ul ng-show='menuState'>
            <li class="menu-disabled-{{isDisabled}}" ng-click='stun()'>Stun</li>
            <li ng-click='disintegrate()'>Disintegrate</li>
            <li ng-click='erase()'>Erase from history</li>
        </ul>
        <div/>

        <div ng-controller="iterationTestController">
            <input type="text" ng-model="student" />
            <button ng-click="addStudent(student)">Add Student!</button>
            <ul>
                <li ng-repeat="student in students" ng-if='student.id != 1'>
                    {{$index + 1}} - {{student.name}}
                </li>
            </ul>
        </div>
</body>
<script type="text/javascript">
var iterationTestModule = angular.module('iterationTest', [], function() {});

var students = [{
    name: 'Mary Contrary',
    id: '1'
}, {
    name: 'Jack Sprat',
    id: '2'
}, {
    name: 'Jill Hill',
    id: '3'
}];

iterationTestModule.controller('DeathrayMenuController', function($scope) {
    $scope.menuState = false;
    $scope.isDisabled = false;

    $scope.toggleMenu = function() {
        $scope.menuState = !$scope.menuState;
    };

    $scope.stun = function() {
        $scope.isDisabled = !$scope.isDisabled;
    };

});

iterationTestModule.controller('iterationTestController', function($scope) {
    $scope.students = students;

    $scope.addStudent = function(student) {
        $scope.students.splice(2, 0, {
            name: student,
            id: '4'
        });
    };
});
</script>

</html>
